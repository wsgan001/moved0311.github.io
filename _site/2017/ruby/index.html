<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      ruby &middot; Taiyi's note
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="/public/css/custom.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  
  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-0b">
    <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8&appId=228652297542969";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Taiyi's note
        </a>
      </h1>
      <p class="lead"></p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/Archive/">Archives</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
      
        
          
        
      
			
	
	<li>
		<a href="https://github.com/moved0311">
		   <span class="fa-stack fa-lg">
              <i class="fa fa-circle fa-stack-2x"></i>
              <i class="fa fa-github fa-stack-1x icon"></i>
          </span>
		</a>
	</li>
	

	
	  <li>
		<a href="https://www.facebook.com/100000329876068">
		  <span class="fa-stack fa-lg">
              <i class="fa fa-circle fa-stack-2x"></i>
              <i class="fa fa-facebook fa-stack-1x icon"></i>
          </span>
		</a>
	  </li>
	

    </nav>

    <p>&copy; 2017. All rights reserved.</p>
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">ruby</h1>
  <span class="post-date">21 Feb 2017</span>
  <h4 id="安裝rvm">安裝rvm</h4>
<ol>
  <li><code class="highlighter-rouge">gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3</code></li>
  <li><code class="highlighter-rouge">\curl -sSL https://get.rvm.io | bash -s stable</code></li>
  <li><code class="highlighter-rouge">source ~/.rvm/scripts/rvm</code></li>
</ol>

<!--more-->

<h4 id="安裝ruby">安裝ruby</h4>
<ol>
  <li><code class="highlighter-rouge">rvm install ruby-2.4.0</code></li>
  <li><code class="highlighter-rouge">/bin/bash --login</code></li>
  <li><code class="highlighter-rouge">gem i awesome_print (code highlight)</code></li>
</ol>
<hr />

<h4 id="測試">測試</h4>
<ol>
  <li><code class="highlighter-rouge">ruby -v</code>  查看版本</li>
  <li>用irb進入測試模式(console mode)</li>
</ol>

<h4 id="印出文字">印出文字</h4>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="nb">print</span>  <span class="c1">#不換行  </span>
<span class="nb">puts</span>   <span class="c1">#換行  </span>
</code></pre>
</div>
<p>所有東西在ruby都是物件<br />
所有物件都有<code class="highlighter-rouge">.class</code>這個method可以看物件種類</p>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="p">(</span><span class="mi">123</span><span class="p">).</span><span class="nf">class</span>   <span class="c1">#Integer</span>
<span class="p">(</span><span class="mi">123</span><span class="p">).</span><span class="nf">methods</span> <span class="c1">#列出class所有可用方法</span>
</code></pre>
</div>
<h4 id="變數">變數</h4>
<p><code class="highlighter-rouge">var</code>  local variable<br />
<code class="highlighter-rouge">@var</code> instance varible<br />
<code class="highlighter-rouge">$var</code> global varible</p>

<h4 id="字串">字串</h4>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="s2">"helloWorld"</span><span class="p">.</span><span class="nf">length</span>       <span class="c1">#10</span>
<span class="s2">"reverseMethod"</span><span class="p">.</span><span class="nf">reverse</span>   <span class="c1">#"dohteMesrever"  </span>

<span class="c1">#字串串接</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">999</span>  
<span class="nb">puts</span> <span class="s2">"hello</span><span class="si">#{</span><span class="n">x</span><span class="si">}</span><span class="s2">world"</span>     <span class="c1">#hello999world</span>
</code></pre>
</div>
<h4 id="註解">註解</h4>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="c1"># I'm comment</span>

<span class="cm">=begin
I'm comment one.
I'm comment two.
=end</span>
</code></pre>
</div>

<h4 id="讀取字串">讀取字串</h4>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="nb">print</span> <span class="s2">"What's your name?"</span>
<span class="n">user_input</span> <span class="o">=</span> <span class="nb">gets</span><span class="p">.</span><span class="nf">chomp</span>
<span class="n">user_input</span><span class="p">.</span><span class="nf">downcase!</span>

<span class="c1">#chomp : remove extra line</span>
<span class="c1"># .downcase! :轉換成小寫</span>
<span class="c1"># !(modified in-place),否則會create一個copy</span>
</code></pre>
</div>

<h4 id="流程控制">流程控制</h4>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span>
  <span class="nb">puts</span> <span class="s2">"x &gt; y"</span> 
<span class="k">elsif</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">y</span>
  <span class="nb">puts</span> <span class="s2">"x &lt; y"</span>
<span class="k">else</span>
  <span class="nb">puts</span> <span class="s2">"x = y"</span>
<span class="k">end</span>
</code></pre>
</div>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">hungry</span> <span class="o">=</span> <span class="kp">false</span>
<span class="k">unless</span> <span class="n">hungry</span>
  <span class="nb">puts</span> <span class="s2">"I'm writing Ruby programs!"</span>
<span class="k">else</span>
  <span class="nb">puts</span> <span class="s2">"Time to eat!"</span>
<span class="k">end</span>

<span class="c1">#I'm writing Ruby programs!</span>
<span class="c1">#nil</span>
</code></pre>
</div>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="mi">3</span>  
<span class="k">case</span> <span class="n">x</span>  
  <span class="k">when</span> <span class="mi">1</span>  
    <span class="nb">puts</span> <span class="mi">1</span>  
  <span class="k">when</span> <span class="mi">2</span>  
    <span class="nb">puts</span> <span class="mi">2</span>  
  <span class="k">when</span> <span class="mi">3</span>  
    <span class="nb">puts</span> <span class="mi">3</span>  
  <span class="k">end</span>  
<span class="c1">#3  </span>
</code></pre>
</div>
<h4 id="迴圈">迴圈</h4>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">for</span> <span class="n">num</span> <span class="k">in</span> <span class="mi">1</span><span class="p">.</span><span class="nf">.</span><span class="o">.</span><span class="mi">10</span>
  <span class="nb">puts</span> <span class="n">num</span>
<span class="k">end</span>

<span class="c1"># ... 1~9</span>
<span class="c1"># ..  1~10</span>
</code></pre>
</div>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">i</span> <span class="o">=</span> <span class="mi">20</span>
<span class="kp">loop</span> <span class="k">do</span>
  <span class="n">i</span> <span class="o">-=</span> <span class="mi">1</span>
  <span class="k">next</span> <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span> <span class="c1">#遇到奇數略過</span>
  <span class="nb">print</span> <span class="s2">"</span><span class="si">#{</span><span class="n">i</span><span class="si">}</span><span class="s2">"</span>
  <span class="k">break</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">0</span>
<span class="k">end</span>

<span class="c1">#181614121086420nil</span>
</code></pre>
</div>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">odds</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">9</span><span class="p">]</span>
<span class="n">odds</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span>
    <span class="nb">print</span> <span class="n">i</span>
<span class="k">end</span>
</code></pre>
</div>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>  
<span class="k">while</span> <span class="kp">true</span>  
  <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>  
  <span class="nb">puts</span> <span class="n">x</span>  
  <span class="k">break</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">10</span>  
<span class="k">end</span>  
</code></pre>
</div>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="mi">10</span><span class="p">.</span><span class="nf">times</span> <span class="k">do</span> <span class="o">|</span><span class="n">x</span><span class="o">|</span>
    <span class="nb">print</span> <span class="s2">"helloworld"</span>
<span class="k">end</span>
</code></pre>
</div>
<h4 id="hash">hash</h4>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">animal</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s2">"dog"</span> <span class="o">=&gt;</span> <span class="s2">"hot dog"</span><span class="p">,</span>
  <span class="s2">"cat"</span> <span class="o">=&gt;</span> <span class="s2">"fat cat"</span><span class="p">,</span>
  <span class="s2">"fox"</span> <span class="o">=&gt;</span> <span class="s2">"fox HD"</span><span class="p">,</span>
  <span class="s2">"duck"</span> <span class="o">=&gt;</span> <span class="s2">"Donald Duck"</span>
<span class="p">}</span>
  
<span class="n">animal</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span>
    <span class="nb">puts</span> <span class="s2">"</span><span class="si">#{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">#{</span><span class="n">value</span><span class="si">}</span><span class="s2">"</span>
<span class="k">end</span>

<span class="o">=&gt;</span> <span class="p">(</span><span class="nb">hash</span> <span class="n">rocket</span><span class="p">)</span>
</code></pre>
</div>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">num</span> <span class="o">=</span> <span class="p">{</span><span class="ss">:one</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span> <span class="ss">:two</span> <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">}</span>
<span class="c1"># 等價於</span>
<span class="n">num</span> <span class="o">=</span> <span class="p">{</span><span class="ss">one: </span><span class="mi">1</span><span class="p">,</span> <span class="ss">two: </span><span class="mi">2</span><span class="p">}</span>
</code></pre>
</div>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="nb">hash</span><span class="p">.</span><span class="nf">select</span><span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">}</span>
<span class="nb">hash</span><span class="p">.</span><span class="nf">each_key</span><span class="p">{</span><span class="o">|</span><span class="n">k</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">k</span><span class="p">}</span>
<span class="nb">hash</span><span class="p">.</span><span class="nf">each_value</span><span class="p">{</span><span class="o">|</span><span class="n">v</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">v</span><span class="p">}</span>
</code></pre>
</div>
<h5 id="string--symbol">string &amp; symbol</h5>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="nb">puts</span> <span class="s2">"string"</span><span class="p">.</span><span class="nf">object_id</span> <span class="c1">#17228620</span>
<span class="nb">puts</span> <span class="s2">"string"</span><span class="p">.</span><span class="nf">object_id</span> <span class="c1">#17228380</span>

<span class="nb">puts</span> <span class="ss">:symbol</span><span class="p">.</span><span class="nf">object_id</span>  <span class="c1">#319528</span>
<span class="nb">puts</span> <span class="ss">:symbol</span><span class="p">.</span><span class="nf">object_id</span>  <span class="c1">#319528</span>

<span class="c1">#hash的key不適合用String 因為String會new新的物件而Symbol不會  </span>
<span class="c1">#效能上symbol會比string好</span>

<span class="c1"># .to_s             轉成string</span>
<span class="c1"># .to_sym (.intern) 轉成symbol</span>
</code></pre>
</div>

<h4 id="定義methods">定義methods</h4>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">greeting</span>
  <span class="nb">puts</span> <span class="s2">"hello"</span>
<span class="k">end</span>
</code></pre>
</div>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">pow</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span>
<span class="k">end</span>
</code></pre>
</div>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span>
<span class="n">arr</span><span class="p">.</span><span class="nf">sort!</span>
</code></pre>
</div>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">temp4</span> <span class="p">(</span><span class="n">x</span> <span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="n">argv</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>  <span class="c1"># *argv多餘的值,block方法  </span>
  <span class="n">block</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">argv</span><span class="p">)</span>  
<span class="k">end</span>   
<span class="n">temp4</span> <span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span> <span class="k">do</span> <span class="o">|</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">argv</span><span class="o">|</span>  
  <span class="n">ap</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">argv</span><span class="p">]</span>  
<span class="k">end</span>  
</code></pre>
</div>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">def</span> <span class="nf">temp5</span><span class="p">(</span><span class="o">&amp;</span><span class="n">block</span><span class="p">)</span>  
  <span class="nb">puts</span> <span class="n">block</span><span class="p">.</span><span class="nf">class</span>  
  <span class="n">block</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>    
<span class="k">end</span>  
<span class="n">temp5</span><span class="p">{</span><span class="o">|</span><span class="n">x</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">x</span><span class="p">}</span>  
</code></pre>
</div>
<h4 id="運算子">運算子</h4>
<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="o">&lt;=&gt;</span>   <span class="c1">#比較運算  </span>
<span class="o">**</span>    <span class="c1">#次方</span>
</code></pre>
</div>

<h4 id="class">Class</h4>
<p>class Car<br />
  def self.hihi<br />
    puts ‘yoo’<br />
    end<br />
  def hihi<br />
    puts ‘hoo’<br />
    end<br />
  end<br />
car = Car.new<br />
Car.hihi	//Car call self.hihi<br />
yoo<br />
car.hihi	//car call hihi<br />
hoo</p>

<p>class Car  <br />
  def set_color(color)<br />
    @color = color		#@color instance varible<br />
    end<br />
  def get_color<br />
    @color<br />
    end<br />
  end<br />
 =&gt; :get_color <br />
blue_car = Car.new <br />
red_car = Car.new<br />
blue_car.set_color(‘BLUE’)<br />
 =&gt; “BLUE” <br />
red_car.set_color(‘RED’)<br />
 =&gt; “RED” <br />
blue_car.get_color<br />
 =&gt; “BLUE” <br />
red_car.get_color <br />
 =&gt; “RED”</p>

<p>@name		#instance varible<br />
@@name		#Car在用的 class varible<br />
$name		#global varible</p>

<p>@moo ||= 123  等價於 @moo = 123 unless @moo<br />
如果@moo沒有值就設定123,有就不動</p>

<h4 id="繼承">繼承</h4>
<p>class Hihi<br />
  def self.nono<br />
    puts 123<br />
    end<br />
  end<br />
class Moo &lt; Hihi ( &lt; inherit)<br />
  end<br />
Moo.nono<br />
123</p>

<p>class Animal<br />
  def say 
    puts “hi”<br />
    end<br />
  end<br />
 =&gt; :say <br />
class Cat &lt; Animal<br />
  def say <br />
    puts “meow”<br />
    super			(use father’s method)<br />
    end<br />
  end<br />
Cat.new.say<br />
//meow<br />
//hi</p>

<p>module A		＃module不能被new<br />
  def hihi<br />
    puts “hihi”<br />
    end<br />
  end<br />
class B<br />
  include A 	#use other module -&gt; include<br />
  end<br />
B.new.hihi<br />
#hihi</p>

<h4 id="regular-expression">regular expression</h4>
<p>regex = /(A-Z)([12])\d{8}/<br />
 =&gt; /(A-Z)([12])\d{8}/ <br />
match = “A145645645”.match(regex)<br />
regex = /([A-Z])([12])\d{8}/<br />
match = “A145645645”.match(regex)<br />
match[0]<br />
 =&gt; “A145645645” <br />
match[1]<br />
 =&gt; “A”<br />
match[2]<br />
 =&gt; “1”</p>

<h4 id="marshal">Marshal</h4>
<p>兩台伺服器要共用一些變數<br />
用Marshal.load載回來</p>

<p>＃Thread<br />
10.times do |i|<br />
    Thread.new do<br />
      sleep rand(5) + 1<br />
    puts i<br />
    end<br />
  end<br />
9<br />
0<br />
4 <br />
5<br />
1<br />
286<br />
7<br />
3</p>

<h4 id="exception">Exception</h4>
<p>begin<br />
    lasjdflsdk<br />
  rescue <br />
  puts $! , $@ 
  end</p>

<p>akey2 rescue “you are error”<br />
 =&gt; “you are error”</p>

<h4 id="call-system">Call System</h4>
<p>`pwd` 或 system(‘pwd’)</p>

<h4 id="gem">gem</h4>
<p>gem install packageName ( = gem i packageName)</p>

<h4 id="教學網站">教學網站</h4>
<ul>
  <li><a href="https://www.codecademy.com/learn/ruby">codecademy Ruby</a></li>
  <li><a href="https://www.youtube.com/watch?v=6XUnYRB0Zpo">RailsFun.tw 新手教學 day1 HD</a></li>
  <li><a href="http://guides.ruby.tw/rails3/getting_started.html#2">Rails 初上手指南</a></li>
</ul>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2017/commandline/">
            command line
            <small>01 Mar 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2017/cloudComputing/">
            SocialCloudComputing
            <small>25 Feb 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2017/javaScript/">
            JavaScript
            <small>24 Feb 2017</small>
          </a>
        </h3>
      </li>
    
  </ul>

  
    <div class="fb-comments" data-href="http://localhost:4000/2017/ruby/" data-width="auto" data-numposts="5"></div>
  
</div>

    </div>

  </body>
</html>
