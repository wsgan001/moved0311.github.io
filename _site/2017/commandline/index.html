<!DOCTYPE html>
<html lang="en-us">
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      command line &middot; Taiyi's note
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="/public/css/custom.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  
  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-0b">
    <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8&appId=228652297542969";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          Taiyi's note
        </a>
      </h1>
      <p class="lead"></p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/Archive/">Archives</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/about/">About</a>
          
        
      
        
      
        
          
        
      
        
          
        
      
			
	
	<li>
		<a href="https://github.com/moved0311">
		   <span class="fa-stack fa-lg">
              <i class="fa fa-circle fa-stack-2x"></i>
              <i class="fa fa-github fa-stack-1x icon"></i>
          </span>
		</a>
	</li>
	

	
	  <li>
		<a href="https://www.facebook.com/100000329876068">
		  <span class="fa-stack fa-lg">
              <i class="fa fa-circle fa-stack-2x"></i>
              <i class="fa fa-facebook fa-stack-1x icon"></i>
          </span>
		</a>
	  </li>
	

    </nav>

    <p>@ 2017</p>
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">command line</h1>
  <span class="post-date">01 Mar 2017</span>
  <p><code class="highlighter-rouge">&gt;</code> redirects and overwriting<br />
<code class="highlighter-rouge">&gt;&gt;</code> redirects and appending<br />
<code class="highlighter-rouge">|</code> redirects standard output to another command<br />
<!--more--></p>

<p><code class="highlighter-rouge">sudo apt-get update</code><br />
<code class="highlighter-rouge">sudo apt-get upgrade</code></p>
<blockquote>
  <p>更新所有有新版本的套件</p>
</blockquote>

<p><code class="highlighter-rouge">sed 's/find/replace/g' filename</code><br />
sed (stream editor)<br />
s: substitution替換<br />
g: global</p>

<p>/<em>============================================================</em>/
					   概念
/<em>============================================================</em>/
自動化管理
	1.查詢登入檔
	2.追蹤流量
	3.監控使用者主機狀態
	4.主機各項硬體設備狀態
	5.主機軟體更新查詢
/<em>============================================================</em>/
						指令
/<em>============================================================</em>/
echo 
 	-n 不換行
打錯要清除
 	ctrl+u
切換到root
 	sudo -i / sudo sudo
查看linux版本
	lsb_release -a
	uname -a
cat filename
	-n 印出行數
wc (word count)</p>

<p>解壓縮
  tar -xf packetName.tgz
    -x 解壓壓
	-f 解壓縮的檔名
  zip
	unzip filename.zip
  rar
	unrar x filename.rar
關機
  sudo shutdown -h now
編輯	
  ed
  a			附加
  xxxx		內容
  .			結束
  w junk	寫入檔案
  q			離開
od (octal dump)
  -c (iterpret bytes as characters)
  -b (show bytes as octal)
  -x (print in hex)</p>

<p>du(disc usage)
可以看到目錄下目錄的檔案大小
  -a 印出目錄下所有檔案</p>

<p>chmod(change mode)
   e.g. 
	chmod 765 filename , chmod +x filename , chmod -w filename		4 read	
	2 write
	1 execute</p>

<p>權限後面的數字代表連結（link)數量
link
	ln junk linktojunk
	類似捷徑的功能link相同代表指到同一個檔案</p>

<p>讓程式在背景跑,跑玩再回傳結果 (&amp;)
e.g. sleep 5 ; date &amp;</p>

<p>關閉螢幕背光
	xset dpms force off</p>

<p>設定快捷鍵(alias)
	alias c = ‘sleep 1 &amp;&amp; xset dpms force off’</p>

<p>netcat (nc)   nc -h (看document)(網路瑞士小刀)
	port 0~1023 需要root權限 1024以上開放一般使用者
	reference : netcat</p>

<div class="highlighter-rouge"><pre class="highlight"><code>測試遠端port是否有開啟
→ 	nc  -v  IP address  Port

兩台主機間複製檔案
→nc  -l  PortNumber  &gt;  my.jpg
→ nc  targetIP PortNumber  &lt;  my.jpg 

在server端 nc -l -p 9999 &gt; filename		(要收的先監聽)
  cient端 nc 192.167.105.17 9999 &lt; filename  
</code></pre>
</div>

<p>wget
	-t 重試次數,超時或中斷會重新連接 (-t0代表無窮多次)
	-c 設定續傳功能
	-r 遞迴下載
	-P 指定到某個目錄</p>

<p>改Bash樣式
  export PS1=’\u@\h\W$’</p>

<p>將bin加入PATH
  export PATH=”$PATH:/xxx/xxx/bin” (暫時,關閉terminal消失)
  -&gt;改bashrc</p>

<p>test
	-e 檔名是否存在
		test -e filename &amp;&amp; echo “exist” || echo “not exist”
	-f 檔名是否存在且為檔案
	-d 檔名是否存在且為目錄
	-z string 判斷字串是否為0 空字串return true
		[-z “${HOME}” ];echo $?
		[<em>”${HOME}”</em>] 資料判斷,運算元兩端必須要有空白</p>

<p>ftp
ncftp (可以上傳資料夾)
	ncftp -u username -p password hostname
	get -r dirname (download)</p>

<p>修改檔案最後修改日期
touch -d 20170101 fileName
/<em>============================================================</em>/
							vim
/<em>============================================================</em>/
:vsp filename (ctrl-w + V)
 垂直分割 
:sp filename (ctrl-w + S)
 水平分割</p>

<p>ctrl+w = 各一半
ctrl+w + 放大
ctrl+w - 縮小</p>

<p>set mouse=a 啟用滑鼠功能</p>

<p>多行註解
	1.ctrl-v (linux)
	  ctrl-q (windows)
	  select block
	2.I (upper-case)
	3.// , # …
	4.ESC
選取相同字<br />
	滑鼠移到字上按<em>,會顯示所有相同字<br />
/</em>============================================================<em>/
							疑難雜症
/</em>============================================================*/
無法將 /var/lib/dpkg/lock 鎖定
	lsof (list open files) 
	sudo lsof /var/lib/dpkg/lock
	sudo kill processID</p>

<p>連線憑證失效
ssh-keygen -f “/home/taiyi/.ssh/known_hosts” -R 140.119.164.118</p>

<p>網路設定 (static)
sudo vim /etc/networking/interfaces
	auto io
	iface io inet loopback
	auto eth0
	iface eth0 inet static
	address 140.119.164.118
	gateway 140.119.164.254
	netmask 255.255.255.0
sudo vim /etc/resolv.conf  (config DNS) (12.04開始捨棄)
	nameserver 140.119.1.110
改在/etc/network/interfaces
	dns-nameservers 140.119.1.110
設定完後更新
	sudo /etc/init.d/networking restart</p>

<p>ping 8.8.8.8 		能通代表有網路
ping google.com		能通代表可以看懂網址(DNS domain name)</p>

<p>/<em>============================================================</em>/  	
					shell Script
/<em>============================================================</em>/<br />
#!/bin/bash		宣告script類型
#1.功能與內容
#2.版本資訊
#3.作者聯絡方式
#4.建檔日期
#5.歷史紀錄</p>

<p>執行shell script</p>
<ol>
  <li>sh script</li>
  <li>chmod +x script
./script</li>
</ol>

<p>sh -x script 可以印出script每個執行的指令</p>

<p>exit n (n is a number)
echo $? 可以顯示n (可以自訂錯誤訊息)</p>

<p>註解 ＃</p>

<p>變數
	var=string (等號兩邊不能空白)
變數使用方法
	echo $x
	echo ${x}</p>

<p>cmd arg1 arg2 … arg9
$0  $1   $2       $9</p>

<p>$* 所有args
$# args個數
shift 可將args 往前移一格</p>

<p>read
	echo “enter your name:”
	read name
	echo “hello $name.”
expr
	expr 2 * ( 3 + 4 ) 各項中間必須空白</p>

<p>/<em>===========================================================</em>/  						
				套件(plugin)
/<em>===========================================================</em>/ 
tmux
	prefix : ctrl + b
	ctrl-b + ctrl不放 + 上下左右可以調整視窗大小
	ctrl-b + 方向 移動視窗
	ctrl-b + % 垂直分割
	ctrl-b + z 放大/縮小視窗
	ctrl-b + c 再開一個新視窗
	ctrl-b + , 重新命名視窗名稱<br />
ssh
	sudo apt-get install openssh-server
	sudo /etc/init.d/ssh start
welcom banner
	sudo apt-get install toilet figlet
	echo “toilet -f mono12 -F gay taiyi” » ~/.bashrc
	echo “fortune | cowsay | toilet –gay -f term” » .bashrc
sshfs
	掛載遠端資料夾
	sshfs user@IP:/home/user/dictionary test 
	將遠端dictionary下的東西掛載到test
	停止掛載
		fusermount -u test
		停止掛載test</p>


</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2017/python/">
            python
            <small>08 Mar 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2017/webSearching/">
            WebSearching
            <small>07 Mar 2017</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/2017/paperWrite/">
            paperWrite
            <small>07 Mar 2017</small>
          </a>
        </h3>
      </li>
    
  </ul>

  
    <div class="fb-comments" data-href="http://localhost:4000/2017/commandline/" data-width="auto" data-numposts="5"></div>

  
</div>

    </div>

  </body>
</html>
